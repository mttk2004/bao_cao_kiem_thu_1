% Định nghĩa một kiểu cột mới cho phép xuống dòng và canh lề trái
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}

\section{Review file \texttt{Profile.java}}

Bảng dưới đây tổng hợp các vấn đề được phát hiện trong file \texttt{Profile.java}.


\begin{longtable}{L{1.5cm} L{3.5cm} c L{4cm} L{4cm}}
    \caption{Bảng review chi tiết cho file \texttt{Profile.java}} \label{tab:review_Profile_java} \\

    \toprule
    \textbf{Check code} & \textbf{Check code Description} & \textbf{Line} & \textbf{Comment} & \textbf{Suggestion / Fix} \\
    \midrule
    \endfirsthead

    \multicolumn{5}{c}%
    {{\tablename\ \thetable{} -- tiếp theo}} \\
    \toprule
    \textbf{Check code} & \textbf{Check code Description} & \textbf{Line} & \textbf{Comment} & \textbf{Suggestion / Fix} \\
    \midrule
    \endhead

    \bottomrule
    \endfoot

    \endlastfoot
    4 & Does every method return the correct value at every method return point? & 6 & import sun.security.util.Password không được sử dụng và là internal API & xóa import sun.security.util.Password \\
    \midrule
    19 & For every object or array reference: Is the value certain to be non-null? & 22-23 & request.getParameter() có thể return null & kiểm tra null: if (action != null \&\& action.equals("promote")) \\
    \midrule
    15 & Is every method parameter value checked before being used? & 32-37 & các parameters không được validate null hoặc empty & thêm null check cho email, FName, LName trước khi tạo User \\
    \midrule
    54 & For each method: Is it no more than about 60 lines long? & 20-65 & method doPost() quá dài (45+ lines) & chia thành methods nhỏ hơn: handlePromotion(), handleProfileUpdate() \\
    \midrule
    19 & For every object or array reference: Is the value certain to be non-null? & 43 & old\_user có thể null từ session & kiểm tra null: if (old\_user != null) \\
    \midrule
    45 & Does every method, class, and file have an appropriate header comment? & 17 & class thiếu javadoc comment & thêm /** javadoc comment */ \\
    \midrule
    49 & Are all comments consistent with the code? & 47-48 & System.out.println() dùng để debug, không phù hợp production & sử dụng logger thay vì System.out.println() \\
    \midrule
    12 & Do all attributes have appropriate access modifiers (private, protected, public)? & 20 & method doPost() nên có @Override annotation & thêm @Override annotation \\
    \midrule
    64 & Are there any uncalled or unneeded methods? & 17 & không có doGet() method & thêm doGet() hoặc comment giải thích tại sao chỉ có POST \\
    \midrule
    66 & Are there any blocks of repeated code that could be condensed into a single method? & 22-31 & promotion logic và profile update có thể tách riêng & tạo separate methods cho từng functionality \\
    \midrule
    37 & Are all exceptions handled appropriately? & 45-54 & có try-catch nhưng chỉ printStackTrace() và return & thêm proper error handling và logging \\
    \midrule
    15 & Is every method parameter value checked before being used? & 40-41 & old\_password và new\_password không được validate null & kiểm tra null trước khi sử dụng: if (old\_password != null) \\
    \midrule
    61 & Are all variables properly defined with meaningful, consistent, and clear names? & 32-37 & tên biến new\_user, old\_user không consistent với naming convention & đổi thành newUser, oldUser \\
\end{longtable}
